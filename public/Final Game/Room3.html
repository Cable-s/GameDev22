<html>
<head>
<style>

</style>
</head>
<body>
<body onload="myLoad()" id="myBody" style="background-repeat:repeat; overflow:hidden; background-size: 100%" background="black.png" onKeyPress="moving(event)">

  <script src="myscripts.js"></script>

  <body onload="{
      load()
      document.getElementById('myText1').value = 3
      setTimeout(store, 300)
      NumHearts();
   }">
   
  <body onunload="{
      unload()
  }">
  
  <input type="hidden" value="Store Text" onclick="{
      store()
   }">
   
  <input type="hidden" value="Retrieve Text" onclick="{
      retrieve()
   }"> 
  
  <input id="myText1" type=number size=1 value=""><br>
  


<script>
function moving(event) {
var dir = 0
var myKey = event.key;

if (myKey === 'd') {
   moveR();
}
if (myKey === 's') {
   moveD();
}
if (myKey === 'w') {
   moveU();
}
if (myKey === 'a') {
   moveL();
}
if (myKey === 'f') {
   att();
}

}

function moveU(){
  document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 15 + 'px';
  document.getElementById('playerI').style.top = parseInt(document.getElementById('playerI').style.top) - 15 + 'px';
  dir = 1;
}
function moveD() {
  document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) + 15 + 'px';
  document.getElementById('playerI').style.top = parseInt(document.getElementById('playerI').style.top) + 15 + 'px';
  dir = 2;
}
function moveL() {
  document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 15 + 'px';
  document.getElementById('playerI').style.left = parseInt(document.getElementById('playerI').style.left) - 15 + 'px';
  dir = 3;
}
function moveR() {
  document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 15 + 'px';
  document.getElementById('playerI').style.left = parseInt(document.getElementById('playerI').style.left) + 15 + 'px';
  dir = 4;
}

function att() {
  if (dir == 4) {
  document.getElementById('attackR').style.width = 25 + "px"
  document.getElementById('attackR').style.height = 75 + "px"
  document.getElementById('attackR').style.left = parseInt(document.getElementById('player').style.left) + 55 + 'px'
  document.getElementById('attackR').style.top = parseInt(document.getElementById('player').style.top) - 15 + 'px'
  setTimeout(attM, 400)
}
if (dir == 3) {
  document.getElementById('attackL').style.width = 25 + "px"
  document.getElementById('attackL').style.height = 75 + "px"
  document.getElementById('attackL').style.left = parseInt(document.getElementById('player').style.left) - 30 + 'px'
  document.getElementById('attackL').style.top = parseInt(document.getElementById('player').style.top) - 15 + 'px'
  setTimeout(attM, 400)
}
if (dir == 2){
  document.getElementById('attackD').style.width = 75 + "px"
  document.getElementById('attackD').style.height = 25 + "px"
  document.getElementById('attackD').style.left = parseInt(document.getElementById('player').style.left) - 13 + 'px'
  document.getElementById('attackD').style.top = parseInt(document.getElementById('player').style.top) + 55 + 'px'
  setTimeout(attM, 400)
}
if (dir == 1){
  document.getElementById('attackT').style.width = 75 + "px"
  document.getElementById('attackT').style.height = 25 + "px"
  document.getElementById('attackT').style.left = parseInt(document.getElementById('player').style.left) - 13 + 'px'
  document.getElementById('attackT').style.top = parseInt(document.getElementById('player').style.top) - 30 + 'px'
  setTimeout(attM, 400)
}

}

function attM() {
  document.getElementById('attackT').style.left = parseInt(document.getElementById('attackT').style.left) - 1000 + 'px'
  document.getElementById('attackD').style.left = parseInt(document.getElementById('attackD').style.left) - 1000 + 'px'
  document.getElementById('attackL').style.left = parseInt(document.getElementById('attackL').style.left) - 1000 + 'px'
  document.getElementById('attackR').style.left = parseInt(document.getElementById('attackR').style.left) - 1000 + 'px'}
</script>

<script>
   // global variables here
   let myGlobalX = 0
   let myClock

//hitboxes

//enemey with walls
function myHitOther(my1,my2){
   left1   = parseInt(document.getElementById(my1).style.left)
   right1  = left1 + parseInt(document.getElementById(my1).style.width)
   top1    = parseInt(document.getElementById(my1).style.top)   
   bottom1 = top1 + parseInt(document.getElementById(my1).style.height)
   left2   = parseInt(document.getElementById(my2).style.left)
   right2  = left2 + parseInt(document.getElementById(my2).style.width)
   top2    = parseInt(document.getElementById(my2).style.top)   
   bottom2 = top2   + parseInt(document.getElementById(my2).style.height)
   if ((right1  >=  left2  ) &&      	   
       (bottom1 >=  top2   ) &&
       (left1   <=  right2 ) &&
       (top1    <=  bottom2)){
       return true
   }
}

function myCheckHit(){
   if ( myHitOther('myImg01','wallT') ){  
         document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) - 10 + 'px'
       }
   if ( myHitOther('myImg01','wallB') ){  
         document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px'
 }
   if ( myHitOther('myImg01','wallL') ){  
         document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
 }
   if ( myHitOther('myImg01','wallR') ){  
         document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 10 + 'px'
 }
   if ( myHitOther('player','PwallT') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','PwallB') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) + 20 + 'px'
 }
   if ( myHitOther('player','PwallL') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 20 + 'px' 
 }
   if ( myHitOther('player','PwallR') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'
 }
   if ( myHitOther('player','myImg01') ){  
    IFrame()
 }
 if ( myHitOther('player','myImg02') ){  
  IFrame()
 }
   if ( myHitOther('player','pillarL1') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'
 }
   if ( myHitOther('player','pillarL2') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'  
 }
   if ( myHitOther('player','pillarL3') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'
 }
   if ( myHitOther('player','pillarL4') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'
 }
   if ( myHitOther('player','pillarR1') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 20 + 'px'
 }
   if ( myHitOther('player','pillarR2') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 20 + 'px'
 }
   if ( myHitOther('player','pillarR3') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 20 + 'px'
 }
   if ( myHitOther('player','pillarR4') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) + 20 + 'px'
 }
   if ( myHitOther('player','pillarT1') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','pillarT2') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','pillarT3') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','pillarT4') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','pillarB1') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 20 + 'px'
 }
   if ( myHitOther('player','pillarB2') ){  
         document.getElementById('player').style.left = parseInt(document.getElementById('player').style.left) - 20 + 'px'
 }

   if ( myHitOther('player','pillarB4') ){  
         document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) + 20 + 'px'
 }
   if ( myHitOther('player','door') ){  
         randomRoom()
 }
 if ( myHitOther('player','door2') ){  
         randomRoom()
 }
   if ( myHitOther('myImg01','baddie') ){  
         document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) - 10 + 'px'
 }   
   if ( myHitOther('myImg01','attackT') ){  
         ouch();
 }
 if ( myHitOther('myImg02','attackT') ){  
         ouch3();
 }
 if (myHitOther('myImg02','PwallL') ){
    document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) - 10 + 'px'
 }
 if (myHitOther('myImg02','PwallB') ){
    document.getElementById('myImg02').style.top = parseInt(document.getElementById('myImg02').style.top) + 10 + 'px'
 }
 if (myHitOther('myImg02','pillarB1') ){
    document.getElementById('myImg02').style.top = parseInt(document.getElementById('myImg02').style.top) - 10 + 'px'
 }
 if (myHitOther('myImg02','pillarB3') ){
    document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) - 10 + 'px'
 }
 if ( myHitOther('myImg01','attackD') ){  
         ouch();
 }
 if ( myHitOther('myImg01','attackL') ){  
         ouch();
 }
 if ( myHitOther('myImg01','attackR') ){  
         ouch();
 }
 if ( myHitOther('myImg02','attackD') ){  
         ouch();
 }
 if ( myHitOther('myImg02','attackL') ){  
         ouch();
 }
 if ( myHitOther('myImg02','attackR') ){  
         ouch();
 }
}

var health = 3;
function ouch() {
   setTimeout(ouch2, 2000)
    if (health <= 0) {
    document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 1000 + 'px' 
   } else {
    
  }  
}

function ouch2() {
   health = health - 1;
}

var health2 = 3;
function ouch3() {
   setTimeout(ouch4, 2000)
    if (health2 <= 0) {
    document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) - 1000 + 'px' 
   } else {
    
  }  
}

function ouch4() {
   health2 = health2 - 1;
}

function IFrame() {
  
  document.getElementById('playerI').style.left = parseInt(document.getElementById('player').style.left)
  document.getElementById('playerI').style.top = parseInt(document.getElementById('player').style.top)
  document.getElementById('player').style.top = parseInt(document.getElementById('player').style.top) - 1000 + 'px'
  setTimeout(Hit, 1000)
  setTimeout(Back, 1000)
}


function Back() {
  document.getElementById('player').style.left = parseInt(document.getElementById('playerI').style.left)
  document.getElementById('player').style.top = parseInt(document.getElementById('playerI').style.top)
  document.getElementById('playerI').style.left = parseInt(document.getElementById('playerI').style.left) - 1000 + 'px'
}
</script>



<input id="myButton01" type=hidden value="background move left" onclick="{
  myTemp = '100px 0px'
  myGlobalX -= 5
  myTemp =  myGlobalX + 'px 0px'
  document.getElementById('myBody').style.backgroundPosition =myTemp
//Put Hitboxes here
//Put other things every frame here (enemies moving, traps, etc)
   myCheckHit();
   timer1();
}">

<input id="btnSt" type=hidden value="Start" onclick="{
  clearInterval(myClock)
  myClock = setInterval(function(){
     document.getElementById('myButton01').click() 
  }, 17)
    
}">

<script>
function timer1() {
let t = Math.floor((Math.random() * 100) + 1);
if (t <= 20) {
   badMove()
} else {
   
}

}
</script>

<script>
function myLoad() {
 document.getElementById('btnSt').click();
 document.getElementById('btnSt2').click();
}
</script>

<script>
function badMove() {
let h = Math.floor((Math.random() * 6) + 1);
if (h == 1) {
  document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) - 5 + 'px'
}else if (h == 2){
  document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 5 + 'px'
}else if (h == 3){
  document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 5 + 'px'
}else if (h == 4){
  document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 5 + 'px'
}else{
  document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left)
}
let t = Math.floor((Math.random() * 6) + 1);
if (t == 1) {
  document.getElementById('myImg02').style.top = parseInt(document.getElementById('myImg02').style.top) - 5 + 'px'
}else if (t == 2){
  document.getElementById('myImg02').style.top = parseInt(document.getElementById('myImg02').style.top) + 5 + 'px'
}else if (t == 3){
  document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) - 5 + 'px'
}else if (t == 4){
  document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) + 5 + 'px'
}else{
  document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left)
}
}

</script>
<script>
function randomRoom() {
document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 1000 + 'px';
let r = Math.floor((Math.random() * 100) + 1);
if ((r >= 1) && (r <= 100))  { 
    window.location.replace("https://calebmemememe.github.io/GameDev22/public/Final%20Game/Room2.html"); 
}
}
</script>

<!-- objects -->
<img id="player" style="position:absolute; width:50px; height:50px; top:575px; left:550px; z-index:0" src="evilHonda.png">
<img id="myImg01" style="position:absolute; width:50px; height:50px; top:200px; left:610px;" src="evilHonda.png">
<img id="myImg02" style="position:absolute; width:50px; height:50px; top:300px; left:910px;" src="evilHonda.png">
<img id="baddie" style="position:absolute; width:1248px; height:120px; top:300px; left:0px;" src="Invisible.png">
<img id="PwallB" style="position:absolute; width:1248px; height:120px; top:0px; left:0px;" src="Invisible.png">
<img id="PwallT" style="position:absolute; width:1248px; height:100px; top:700px; left:0px;" src="Invisible.png">
<img id="PwallL" style="position:absolute; width:40px; height:700px; top:0px; left:375px;" src="Invisible.png">
<img id="playerI" style="position:absolute; width:50px; height:50px; top:400px; left:-1050px; z-index:0" src="ng">

<img id="PwallR" style="position:absolute; width:100px; height:700px; top:0px; left:1248px;" src="Invisible.png">
<img id="wallB" style="position:absolute; width:1248px; height:120px; top:0px; left:0px;" src="Invisible.png">
<img id="wallT" style="position:absolute; width:1248px; height:100px; top:700px; left:0px;" src="Invisible.png">
<img id="wallL" style="position:absolute; width:40px; height:700px; top:0px; left:395px;" src="Invisible.png">
<img id="wallR" style="position:absolute; width:40px; height:700px; top:0px; left:925px;" src="Invisible.png">
<img id="pillarB1" style="position:absolute; width:1248px; height:20px; top:400px; left:750px;" src="Invisible.png">
<img id="pillarB2" style="position:absolute; width:20px; height:500px; top:400px; left:750px;" src="Invisible.png">
<img id="pillarB3" style="position:absolute; width:20px; height:600px; top:0px; left:750px;" src="Invisible.png">
<img id="pillarB4" style="position:absolute; width:65px; height:20px; top:567px; left:-370px;" src="Invisible.png">
<img id="pillarT1" style="position:absolute; width:65px; height:20px; top:210px; left:-925px;" src="Invisible.png">
<img id="pillarT2" style="position:absolute; width:65px; height:20px; top:505px; left:-925px;" src="Invisible.png">
<img id="pillarT3" style="position:absolute; width:65px; height:20px; top:210px; left:-370px;" src="Invisible.png">
<img id="pillarT4" style="position:absolute; width:65px; height:20px; top:505px; left:-370px;" src="Invisible.png">
<img id="pillarL1" style="position:absolute; width:1px; height:65px; top:215px; left:-925px;" src="Invisible.png">
<img id="pillarL2" style="position:absolute; width:1px; height:65px; top:510px; left:-925px;" src="Invisible.png">
<img id="pillarL3" style="position:absolute; width:1px; height:65px; top:215px; left:-370px;" src="Invisible.png">
<img id="pillarL4" style="position:absolute; width:1px; height:65px; top:510px; left:-370px;" src="Invisible.png">
<img id="pillarR1" style="position:absolute; width:1px; height:65px; top:215px; left:-989px;" src="Invisible.png">
<img id="pillarR2" style="position:absolute; width:1px; height:65px; top:510px; left:-989px;" src="Invisible.png">
<img id="pillarR3" style="position:absolute; width:1px; height:65px; top:215px; left:-434px;" src="Invisible.png">
<img id="pillarR4" style="position:absolute; width:1px; height:65px; top:510px; left:-434px;" src="Invisible.png">
<img id="door" style="position:absolute; width:70px; height:100px; top:650px; left:550px;" src="door.png">
<img id="door2" style="position:absolute; width:70px; height:100px; top:200px; left:1225px;" src="door.png">
<img id="attackT" style="position:absolute; width:25px; height:75px; top:390px; left:-100px;" src="attackT.png">
<img id="attackD" style="position:absolute; width:25px; height:75px; top:390px; left:-100px;" src="attackD.png">
<img id="attackL" style="position:absolute; width:75px; height:25px; top:390px; left:-100px;" src="attackL.png">
<img id="attackR" style="position:absolute; width:75px; height:25px; top:390px; left:-100px;" src="attackR.png">
<img id="room" src="Room3.png" style="width:1280px; height:720px">
<img id="heart1" style="position:absolute; width:50px; height:50px; top:0px; left:0px; z-index:0" src="evilHonda.png">
<img id="heart2" style="position:absolute; width:50px; height:50px; top:0px; left:50px; z-index:0" src="evilHonda.png">
<img id="heart3" style="position:absolute; width:50px; height:50px; top:0px; left:100px; z-index:0" src="evilHonda.png">
</body>
</html>